<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Telegram Mini App ‚Ä¢ Reward Counter</title>
  <style>
    :root{
      --bg:#0f1115; --card:#161a22; --text:#e7eaf3; --muted:#9aa4bc; --accent:#4c8bf5;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{background:var(--bg);color:var(--text);font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans; display:grid; place-items:center;}
    .card{width:min(440px,92vw); background:var(--card); border-radius:20px; padding:24px; box-shadow:0 8px 32px rgba(0,0,0,.35);}
    h1{margin:0 0 6px;font-size:22px}
    p{margin:0 0 16px;color:var(--muted)}
    .meter{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:14px 0 4px}
    .count{font-variant-numeric:tabular-nums; font-size:48px; font-weight:700; text-shadow:0 0 12px rgba(76,139,245,0.6); transition: all 0.3s ease;}
    .count.glow{
      animation:pulse 1s ease-in-out 3;
    }
    @keyframes pulse{
      0%{text-shadow:0 0 12px rgba(76,139,245,0.6)}
      50%{text-shadow:0 0 28px rgba(76,139,245,1)}
      100%{text-shadow:0 0 12px rgba(76,139,245,0.6)}
    }
    .ads-counter{font-size:16px; font-weight:600; color:var(--muted); margin-bottom:18px;}
    .btn{appearance:none;border:0;border-radius:16px;padding:16px 18px; font-size:18px; font-weight:700; cursor:pointer; width:100%; background:var(--accent); color:white; transition:transform .03s ease;}
    .btn:active{transform:scale(.98)}
    .row{display:flex; gap:10px}
    .ghost{background:transparent; border:1.5px solid #2a3244; color:var(--text)}
    .kicker{font-size:12px; color:var(--muted); margin-top:10px}
    .warn{color:#ffd166}
    code{background:#0c0f14;border:1px solid #222836;border-radius:8px;padding:2px 6px}
  </style>
  <!-- GigaPub SDK -->
  <script src="https://ad.gigapub.tech/script?id=1731"></script>
</head>
<body>
  <div class="card">
    <h1>Reward Counter</h1>
    <p>Earn rewards by watching ads.</p><div class="meter">
  <div class="kicker">Total Points</div>
  <div class="count" id="count">0</div>
</div>
<div class="ads-counter" id="adsCount">Ads Watched: 0</div>

<div class="row" style="margin-top:10px">
  <button id="themeBtn" class="btn ghost">Toggle Theme</button>
</div>

<!-- ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¨‡¶æ‡¶ü‡¶® -->
<button id="adsBtn" class="btn" style="margin-top:12px;background:#f59e0b">
  üì¢ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
</button>

<p class="kicker" id="status">Loading Telegram context‚Ä¶</p>
<p class="kicker warn">‚ö†Ô∏è Auto‚Äëclicking/automation can violate app rules & Telegram/TOS. This demo intentionally disables any programmatic tapping inside Telegram.</p>

  </div>  <script>
    const tg = window.Telegram ? window.Telegram.WebApp : null;
    const statusEl = document.getElementById('status');
    const countEl = document.getElementById('count');
    const adsCountEl = document.getElementById('adsCount');
    const themeBtn = document.getElementById('themeBtn');
    const adsBtn = document.getElementById('adsBtn');

    let count = 0;
    let adsCount = 0;

    function render(){
      countEl.textContent = count.toString();
      adsCountEl.textContent = `Ads Watched: ${adsCount}`;
      if (tg) {
        tg.MainButton.setText(`Save (${count})`);
        tg.MainButton.show();
      }
    }

    function glow(){
      countEl.classList.add('glow');
      setTimeout(()=> countEl.classList.remove('glow'), 3000);
    }

    themeBtn.addEventListener('click', () => {
      document.documentElement.classList.toggle('light');
      const light = document.documentElement.classList.contains('light');
      document.documentElement.style.setProperty('--bg', light ? '#f7f8fb' : '#0f1115');
      document.documentElement.style.setProperty('--card', light ? '#ffffff' : '#161a22');
      document.documentElement.style.setProperty('--text', light ? '#0f1115' : '#e7eaf3');
      document.documentElement.style.setProperty('--muted', light ? '#5a647a' : '#9aa4bc');
    });

    // ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ (GigaPub integration ‡¶∏‡¶π)
    adsBtn.addEventListener('click', () => {
      if (typeof window.showGiga === "function") {
        window.showGiga("main")
          .then(() => {
            count += 10; // reward +10
            adsCount += 1; // ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ +1
            render();
            glow(); // glow effect after reward

            if (tg) {
              tg.sendData(JSON.stringify({ action: 'ads_reward', reward: 10, total: count, adsWatched: adsCount }));
            }
            alert(`Reward unlocked! üéâ +10 ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ Ads watched: ${adsCount}`);
          })
          .catch(e => {
            console.error("GigaPub error:", e);
            alert("‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
          });
      } else {
        if (tg) {
          tg.sendData(JSON.stringify({ action: 'show_ads' }));
          tg.HapticFeedback.notificationOccurred('success');
        } else {
          alert("‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (‡¶°‡ßá‡¶Æ‡ßã ‡¶Æ‡ßã‡¶°)");
        }
      }
    });

    if (tg) {
      try {
        tg.expand();
        tg.ready();
        statusEl.textContent = 'Running inside Telegram Mini App.';

        tg.onEvent('mainButtonClicked', () => {
          tg.HapticFeedback.impactOccurred('light');
          tg.close();
        });
      } catch (e) {
        statusEl.textContent = 'Telegram context detected, but init failed.';
        console.error(e);
      }
    } else {
      statusEl.textContent = 'Not in Telegram ‚Äî running in a normal browser.';
    }

    render();
  </script></body>
</html>
